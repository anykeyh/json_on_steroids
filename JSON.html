<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.36.1">
<meta name="crystal_docs.project_version" content="HEAD">
<meta name="crystal_docs.project_name" content="json_on_steroids">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="json_on_steroids">
  <title>JSON - json_on_steroids HEAD</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          json_on_steroids
        </a>
      </h1>

      <span class="project-version">
        HEAD
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="json_on_steroids/Clear" data-name="clear">
      <a href="Clear.html">Clear</a>
      
        <ul>
  
  <li class="parent " data-id="json_on_steroids/Clear/Model" data-name="clear::model">
      <a href="Clear/Model.html">Model</a>
      
        <ul>
  
  <li class="parent " data-id="json_on_steroids/Clear/Model/Converter" data-name="clear::model::converter">
      <a href="Clear/Model/Converter.html">Converter</a>
      
        <ul>
  
  <li class="parent " data-id="json_on_steroids/Clear/Model/Converter/JSON" data-name="clear::model::converter::json">
      <a href="Clear/Model/Converter/JSON.html">JSON</a>
      
        <ul>
  
  <li class=" " data-id="json_on_steroids/Clear/Model/Converter/JSON/OnSteroidConverter" data-name="clear::model::converter::json::onsteroidconverter">
      <a href="Clear/Model/Converter/JSON/OnSteroidConverter.html">OnSteroidConverter</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent open current" data-id="json_on_steroids/JSON" data-name="json">
      <a href="JSON.html">JSON</a>
      
        <ul>
  
  <li class=" " data-id="json_on_steroids/JSON/Any" data-name="json::any">
      <a href="JSON/Any.html">Any</a>
      
    </li>
  
  <li class="parent " data-id="json_on_steroids/JSON/OnSteroids" data-name="json::onsteroids">
      <a href="JSON/OnSteroids.html">OnSteroids</a>
      
        <ul>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/Access" data-name="json::onsteroids::access">
      <a href="JSON/OnSteroids/Access.html">Access</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/AuthorizedSetTypes" data-name="json::onsteroids::authorizedsettypes">
      <a href="JSON/OnSteroids/AuthorizedSetTypes.html">AuthorizedSetTypes</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/Dirty" data-name="json::onsteroids::dirty">
      <a href="JSON/OnSteroids/Dirty.html">Dirty</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/Exception" data-name="json::onsteroids::exception">
      <a href="JSON/OnSteroids/Exception.html">Exception</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/InPlace" data-name="json::onsteroids::inplace">
      <a href="JSON/OnSteroids/InPlace.html">InPlace</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/KeyNotFoundException" data-name="json::onsteroids::keynotfoundexception">
      <a href="JSON/OnSteroids/KeyNotFoundException.html">KeyNotFoundException</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/MergeOperations" data-name="json::onsteroids::mergeoperations">
      <a href="JSON/OnSteroids/MergeOperations.html">MergeOperations</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/NotAnArray" data-name="json::onsteroids::notanarray">
      <a href="JSON/OnSteroids/NotAnArray.html">NotAnArray</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/NotAnObject" data-name="json::onsteroids::notanobject">
      <a href="JSON/OnSteroids/NotAnObject.html">NotAnObject</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/RawWrappedValue" data-name="json::onsteroids::rawwrappedvalue">
      <a href="JSON/OnSteroids/RawWrappedValue.html">RawWrappedValue</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/Searchable" data-name="json::onsteroids::searchable">
      <a href="JSON/OnSteroids/Searchable.html">Searchable</a>
      
    </li>
  
  <li class=" " data-id="json_on_steroids/JSON/OnSteroids/WrappedPrimitive" data-name="json::onsteroids::wrappedprimitive">
      <a href="JSON/OnSteroids/WrappedPrimitive.html">WrappedPrimitive</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">module</span> JSON

</h1>





  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>The JSON module allows parsing and generating <a href="http://json.org/">JSON</a> documents.</p>

<h3><a id="general-type-safe-interface" class="anchor" href="#general-type-safe-interface">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>General type-safe interface</h3>

<p>The general type-safe interface for parsing JSON is to invoke <code>T.from_json</code> on a
target type <code>T</code> and pass either a <code>String</code> or <code>IO</code> as an argument.</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;json&quot;</span>

json_text <span class="o">=</span> <span class="s">%([1, 2, 3])</span>
<span class="t">Array</span>(<span class="t">Int32</span>).from_json(json_text) <span class="c"># =&gt; [1, 2, 3]</span>

json_text <span class="o">=</span> <span class="s">%({&quot;x&quot;: 1, &quot;y&quot;: 2})</span>
<span class="t">Hash</span>(<span class="t">String</span>, <span class="t">Int32</span>).from_json(json_text) <span class="c"># =&gt; {&quot;x&quot; =&gt; 1, &quot;y&quot; =&gt; 2}</span></code></pre>

<p>Serializing is achieved by invoking <code>to_json</code>, which returns a <code>String</code>, or
<code>to_json(io : IO)</code>, which will stream the JSON to an <code>IO</code>.</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;json&quot;</span>

[<span class="n">1</span>, <span class="n">2</span>, <span class="n">3</span>].to_json            <span class="c"># =&gt; &quot;[1,2,3]&quot;</span>
{<span class="s">&quot;x&quot;</span> => <span class="n">1</span>, <span class="s">&quot;y&quot;</span> => <span class="n">2</span>}.to_json <span class="c"># =&gt; &quot;{\&quot;x\&quot;:1,\&quot;y\&quot;:2}&quot;</span></code></pre>

<p>Most types in the standard library implement these methods. For user-defined types
you can define a <code>self.new(pull : JSON::PullParser)</code> for parsing and
<code>to_json(builder : JSON::Builder)</code> for serializing. The following sections
show convenient ways to do this using <code>JSON::Serializable</code>.</p>

<p><span class="flag purple">NOTE</span>  JSON object keys are always strings but they can still be parsed
and deserialized to other types. To deserialize, define a
<code>T.from_json_object_key?(key : String) : T?</code> method, which can return <code>nil</code>
if the string can't be parsed into that type. To serialize, define a
<code>to_json_object_key : String</code> method can be serialized that way.
All integer and float types in the standard library can be deserialized that way.</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;json&quot;</span>

json_text <span class="o">=</span> <span class="s">%({&quot;1&quot;: 2, &quot;3&quot;: 4})</span>
<span class="t">Hash</span>(<span class="t">Int32</span>, <span class="t">Int32</span>).from_json(json_text) <span class="c"># =&gt; {1 =&gt; 2, 3 =&gt; 4}</span>

{<span class="n">1.5</span> => <span class="n">2</span>}.to_json <span class="c"># =&gt; &quot;{\&quot;1.5\&quot;:2}&quot;</span></code></pre>

<h3><a id="parsing-with-json.parse" class="anchor" href="#parsing-with-json.parse">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Parsing with <code>JSON.parse</code></h3>

<p><code>JSON.parse</code> will return an <code><a href="JSON/Any.html">Any</a></code>, which is a convenient wrapper around all possible JSON types,
making it easy to traverse a complex JSON structure but requires some casts from time to time,
mostly via some method invocations.</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;json&quot;</span>

value <span class="o">=</span> <span class="t">JSON</span>.parse(<span class="s">&quot;[1, 2, 3]&quot;</span>) <span class="c"># : JSON::Any</span>

value[<span class="n">0</span>]              <span class="c"># =&gt; 1</span>
<span class="k">typeof</span>(value[<span class="n">0</span>])      <span class="c"># =&gt; JSON::Any</span>
value[<span class="n">0</span>].as_i         <span class="c"># =&gt; 1</span>
<span class="k">typeof</span>(value[<span class="n">0</span>].as_i) <span class="c"># =&gt; Int32</span>

value[<span class="n">0</span>] <span class="o">+</span> <span class="n">1</span>       <span class="c"># Error, because value[0] is JSON::Any</span>
value[<span class="n">0</span>].as_i <span class="o">+</span> <span class="n">10</span> <span class="c"># =&gt; 11</span></code></pre>

<p><code>JSON.parse</code> can read from an <code>IO</code> directly (such as a file) which saves
allocating a string:</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;json&quot;</span>

json <span class="o">=</span> <span class="t">File</span>.open(<span class="s">&quot;path/to/file.json&quot;</span>) <span class="k">do</span> <span class="o">|</span>file<span class="o">|</span>
  <span class="t">JSON</span>.parse(file)
<span class="k">end</span></code></pre>

<p>Parsing with <code>JSON.parse</code> is useful for dealing with a dynamic JSON structure.</p>

<h3><a id="generating-with-json.build" class="anchor" href="#generating-with-json.build">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Generating with <code>JSON.build</code></h3>

<p>Use <code>JSON.build</code>, which uses <code>JSON::Builder</code>, to generate JSON
by emitting scalars, arrays and objects:</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;json&quot;</span>

string <span class="o">=</span> <span class="t">JSON</span>.build <span class="k">do</span> <span class="o">|</span>json<span class="o">|</span>
  json.object <span class="k">do</span>
    json.field <span class="s">&quot;name&quot;</span>, <span class="s">&quot;foo&quot;</span>
    json.field <span class="s">&quot;values&quot;</span> <span class="k">do</span>
      json.array <span class="k">do</span>
        json.number <span class="n">1</span>
        json.number <span class="n">2</span>
        json.number <span class="n">3</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
string <span class="c"># =&gt; %&lt;{&quot;name&quot;:&quot;foo&quot;,&quot;values&quot;:[1,2,3]}&gt;</span></code></pre>

<h3><a id="generating-with-to-json" class="anchor" href="#generating-with-to-json">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Generating with <code>to_json</code></h3>

<p><code>to_json</code>, <code>to_json(IO)</code> and <code>to_json(JSON::Builder)</code> methods are provided
for primitive types, but you need to define <code>to_json(JSON::Builder)</code>
for custom objects, either manually or using <code>JSON::Serializable</code>.</p>














  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/anykeyh/json_on_steroids/blob/9c43ff02a7c315290ba00a9257a88db0018124d7/src/json_on_steroids.cr#L3" target="_blank">
        json_on_steroids.cr
      </a>
    
    <br/>
  













<div class="methods-inherited">
  
</div>









</div>

</body>
</html>
